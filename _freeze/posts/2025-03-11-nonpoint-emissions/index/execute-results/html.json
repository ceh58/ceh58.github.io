{
  "hash": "c2cd37f116ca75cfc5e5aa31a8b8d320",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Emissions in the USA\"\ndescription: \"A breakdown of the *drivers* behind decentralized sources of emissions.\"\nauthor:\n  - name: Carmen Hoyt\n    url: https://ceh58.github.io/\n    affiliation: Master of Environmental Data Science Program @ The Bren School (UCSB)\n    affiliation-url: https://ucsb-meds.github.io/ \ndate: last-modified\ncategories: [R, EDS240, ggplot, Data Visualization]\nformat:\n  html:\n      toc: true\n      code-fold: true\n      echo: true\n      message: false\n      eval: true\n      warning: false\nimage: car.jpg\ndraft: false \neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n::: {.cell-output-display}\n![](final-infographic.png){width=1650}\n:::\n:::\n\n\n\n# Emissions in the USA\n\n\nIn 2020, the United States was the second highest contributor of greenhouse gas emissions, globally[^1]. Generally, sources of emissions are classified as either **Point** or **Nonpoint.** Point sources are emissions that can be attributed to specific places, such as power plants or airports, while nonpoint sources are aggregates of emissions that cannot be traced to a single location but rather are estimated across a space.\n\n\nIn the Environmental Protection Agency’s (EPA) [National Emissions Inventory (NEI)](https://awsedap.epa.gov/public/single/?appid=20230c40-026d-494e-903f-3f112761a208&sheet=5d3fdda7-14bc-4284-a9bb-cfd856b9348d&opt=ctxmenu,currsel) dataset, point sources comprise 98% of emissions (in tons) reported in the 2020 release. Even though nonpoint sources only represent the remaining 2%[^2], they are still responsible for 2.4 gigatons of emissions: a *weight* equivalent to approximately 375 Pyraminds of Giza. Since it’s inherently harder to conceptualize these unseen sources, I decided to focus on breaking down the *who*, the *what*, and the *where* of nonpoint emissions[^3].\n\n\n## Design Choices\n\n\nI chose three fundamental graphic forms (a bar chart, a donut chart, and a map), created them in `{ggplot}`, and assembled them using Affinity. To answer “*who* is responsible for nonpoint emissions,” I used a donut chart to breakdown total nonpoint emissions (in tons) by sector. This led to the finding that the majority of emissions come from the **Mobile** sector, which I further broke down into two categories (**Onroad** and **Nonroad**). To investigate the relative contribution of each category, I used a bar chart to visually compare lengths (representative of tons of emissions). Originally, I had planned to use these bars as “smokestacks”, but I changed my mind because I felt that smokestacks better represented *point* sources better than *nonpoint* sources. I used additional donut charts to answer the question “*what* pollutants comprise nonpoint emissions.” After finding that CO2 was the vast majority by weight (98%), I made a second donut chart to break down the remaining pollutants. Finally, I determined that the best way to answer “*where* are nonpoint emissions concentrated” was to show the spatial allocation of emissions (in tons) per square mile on a stylized map of the U.S. with states shaded by magnitude. Since larger states tended to emit more, I chose to normalize by area (square mile) to give a better sense of how states related to their emissions contributions, especially since they were represented by equal area squares in the map. \n\n\nI used text annotations to guide the reader through the infographic and point out the main takeaways for each of my three questions and their corresponding sections. I labeled the bars on the bar chart to distinguish between the two **Mobile** sector categories and annotated with the total tons of emissions for each. I also included simple text legends for my donut charts, with the text colored to match the chart. I chose to add a subtitle to the map to make it clear what the units (tons/square mile) were. \n\n\nI used `theme_void()` for all my base themes to make customizing the overall style relatively simple. I didn’t include axes on any of my graphs because I relied on color and relative size to convey the necessary information without overloading on numbers. I felt that numbers were difficult to contextualize, especially in tons, and I wanted my overall infographic to be free from the clutter of grid lines and extra axes.\n\n\nI intentionally filtered color palettes for colorblind-friendly options. I pulled specific colors from [“palettetown::gloom”](https://emilhvitfeldt.github.io/r-color-palettes/discrete/palettetown/gloom/) (such as the red for the map and the yellow for the lines on the road) to fit the overall theme of the larger infographic without being overwhelming on the color front. I think the dark color of the “road” bar chart balances the brighter colors, and I opted for a solid light gray background for contrast. I chose the dark red color for the map since it didn't immediately infer any connections to individual pollutants on the donut chart, as the map represents *total* nonpoint emissions (across all pollutants) per square mile. The dark red elicits some sense of “danger” without being too alarming. The collection as a whole helps to convey the “doom and gloom” emotion that I am trying to invoke with my exploration of emissions. \n\n\nI chose to use a **bolded** IBM Plex Sans Condensed for title text and a normal IBM Plex Sans for subtext (annotations, axis labels, etc.) because it has a modern, respectable presence without being overly official. I used bold typeface for the section titles to draw the readers attention to the *who* (**By Sector**), the *what* (**By Pollutant**), and the *where* (**By State**). I also bolded a few key words that summarized the takeaways/implications for each section. \n\n\nI chose relatively simple graphic forms as well as a simple general layout to avoid information overload. I removed most of the legends and/or opted for simple text legends where possible. I used minimal objects and turned the **Onroad** bar into a road to make it visually enticing yet still informative. By removing axes and non-essential graphic elements, I did my best to generally minimize the data-ink ratio.  \n\n\nI stylized the sector donut chart as a wheel (thanks, [Sam](https://github.com/samanthacsik), for the suggestion!) and included one small car object to contextualize the focus on the **Mobile** sector as the majority sector responsible for nonpoint emissions. This, in combination with the “road” bar chart, further helps to place responsibility for the majority of **Nonpoint** emissions on the mobile sector, including cars and trucks. I also contextualized the health implications of various pollutants with a small skull and cross bones graphic.\n\n\nNonpoint emissions are such that they do not have a specific fixed location. Thus, my primary message revolves around uncovering the *who*, the *what*, and the *where* concerning nonpoint emissions. I wanted to convey that nonpoint emissions are not insignificant and are more relevant in our daily lives than we may realize. \n\nEmissions come from many, many sources. In some sense, the *who* of nonpoint emissions really includes everyone, as most people can relate to driving a car, taking public transportation, or even contributing to the larger network of shipping through online purchases or getting groceries. My intention was to send the message that nonpoint emissions are more tangible than the name leads us to believe. By giving some context to these emissions, I hope people will think about their individual contributions and make changes to their driving habits where they can. \n\n\nYou can access my code for each graph by clicking on the respective arrows below.\n\n\n[^1]: [EPA Global Greenhouse Gas Overview](https://www.epa.gov/ghgemissions/global-greenhouse-gas-overview)\n\n\n[^2]: To give this better context, the brown box behind \"nonpoint\" in the infograhpic title represents 2% of the total page space, proportional to the contribution of nonpoint emissions to total emissions.\n\n\n[^3]: [NEI support documentation](https://www.epa.gov/air-emissions-inventories/2020-national-emissions-inventory-nei-technical-support-document-tsd)\n\n\n## Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Load Data + Packages\"}\n# -------- Load packages --------\nlibrary(tidyverse)\nlibrary(here)\nlibrary(ggwordcloud)\nlibrary(geofacet) \nlibrary(paletteer)\nlibrary(showtext)\nlibrary(patchwork)\nlibrary(janitor)\n\n# -------- Load data --------\nemissions_cleaned_non_point <- read_csv(here(\"posts/\", \"2025-03-11-nonpoint-emissions/\", \"data\", \"emissions_cleaned.csv\"), show_col_types = FALSE) %>%\n  clean_names()\n\n# -------- Load fonts ---------\nshowtext_auto()\n\n# Import Google fonts\nfont_add_google(name = \"IBM Plex Sans Condensed\", family = \"ibm_condensed\")\ntitletext <- \"ibm_condensed\"\n\nfont_add_google(name = \"IBM Plex Sans\", family = \"ibm_plex\")\nsubtext <- \"ibm_plex\"\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Bar Graph\"}\n# -------- Emissions data for mobile sector --------\nroad_data <- emissions_cleaned_non_point %>%\n  \n  # Filter for the \"Mobile\" sector\n  filter(str_detect(eis_sector, \"Mobile\")) %>%\n  \n  # Label by \"Mobile\" sector subcategories\n  mutate(cleaned_subsector = case_when(\n    str_detect(eis_sector, \"Commercial Marine Vessels\") ~ \"Other\",\n    str_detect(eis_sector, \"Locomotives\") ~ \"Other\",\n    str_detect(eis_sector, \"Non-Road\") ~ \"Nonroad\",\n    str_detect(eis_sector, \"On-Road\") ~ \"Onroad\"\n  )) %>%\n  \n  # Calculate emissions for each subcategory\n  group_by(cleaned_subsector) %>%\n  summarise(total_emissions = sum(emissions_tons))\n  \n\n# -------- Mobile sector bar chart --------\nroad <- road_data %>%\n  \n  # Remove \"Other\" category to focus on onroad/nonroad relationship\n  filter(cleaned_subsector != \"Other\") %>%\n  ggplot(aes(cleaned_subsector, total_emissions)) +\n  \n  # Choose dark gray color\n  geom_bar(stat = \"identity\", fill = \"gray10\") +\n  \n  # Label bars with emissions totals (in tons)\n  geom_text(aes(cleaned_subsector, total_emissions, label = scales::label_comma(accuracy = 1, suffix = \" tons\")(total_emissions)),\n            vjust = - 0.5, \n            size = 5,\n            family = subtext) +\n  \n  # Set base theme\n  theme_void() +\n  \n  # Adjust theme\n  theme(\n    \n    # Add x axis text\n    axis.text.x = element_text(family = subtext,\n                               size = 25,\n                               # Move labels closer to bars\n                               margin = margin(t = -20,\n                                               b = 10)),\n    # Set aspect ratio\n    aspect.ratio = 2,\n    \n    # Remove legend\n    legend.position = \"none\",\n    \n    # Extend plot margin\n    plot.margin = margin(t = 0,\n                         r = 10,\n                         l = 10,\n                         b = 0)\n  )\n\n# View\nroad\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){fig-alt='A bar chart showing the breakdown of emissions (in tons) by nonroad and onroad categories of the mobile sector, with onroad emissions contributing over 16 times the nonroad contributions.' width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Map\"}\n# -------- Convert built-in state.area to a df --------\nstate_data <- data.frame(\n  state = state.name,\n  abbrv = state.abb,\n  area = state.area\n)\n\n# --------- Merge state and emissions dfs --------\nstate <- emissions_cleaned_non_point %>%\n  left_join(state_data, by = \"state\") %>%\n  group_by(state, abbrv, area) %>%\n  summarise(total_emissions = sum(emissions_tons)) %>%\n  mutate(rel_emissions = total_emissions/area) %>%\n  arrange(desc(rel_emissions)) %>%\n  ungroup() %>%\n  mutate(opacity = rel_emissions/max(rel_emissions))\n\n# Define specific colors\ncore = \"#983100\" # from gloom palette\naccent = \"gray20\"\n\n# -------- Create map --------\nmap <- ggplot(state) +\n\n  # Initiate plot, shading by concentration (opacity value) \n  geom_rect(aes(xmin = 0, xmax = 1, ymin = 0, ymax = 1, alpha = opacity), \n            fill = core) +\n  \n  # Label with state abbreviation\n  geom_text(aes(x = 0.5, y = 0.7, label = abbrv), \n            size = 7, \n            family = subtext) +\n  \n  # Label with tons/square mile\n  geom_text(aes(x = 0.5, y = 0.3, label = round(rel_emissions, 0)), \n            size = 5, \n            family = subtext)  +\n\n  # Break rectangle up by state\n  geofacet::facet_geo(~state) +\n\n  # Make each rectangle the same size\n  coord_fixed(ratio = 1) +\n  \n  # Add description line as subtitle\n  labs(subtitle = \"Tons per Square Mile\",\n       caption = \"Data Source: EPA National Emissions Inventory 2020\"\n       ) +\n  \n  # Set base theme\n  theme_void() +\n  \n  # Customize theme\n  theme(\n    \n    # Remove headers \n    strip.text = element_blank(),\n    \n    # Adjust the subtitle\n    plot.subtitle = element_text(family = subtext,\n                                 size = 15, \n                                 margin = margin(b = 10)),\n    \n    # Adjust the caption\n    plot.caption = element_text(family = subtext,\n                                size = 10,\n                                margin = margin(t = 10),\n                                hjust = 0),\n    \n    # Remove legend\n    legend.position = \"none\",\n    \n    # Adjust plot margins\n    plot.margin = margin(b = 10, \n                         t = 10, \n                         r = 20, \n                         l = 20)\n  )\n\n# View\nmap\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){fig-alt='A map showing emissions (in tons) per square mile for each state in the US, with New Jersey producing the most followed by Rhode Island and Masssachusetts.' width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Sector Donut\"}\n# -------- Emissions by sector --------\nsector <- emissions_cleaned_non_point %>%\n  mutate(sector = ifelse(str_detect(eis_sector, \"Mobile\"), \"Mobile\", \"Other\")) %>%\n  group_by(sector) %>%\n  summarise(emissions_tons = sum(emissions_tons, na.rm = TRUE)) %>%\n  mutate(label = paste0(sector, \" (\", round((emissions_tons/sum(emissions_tons))*100, 0), \" %)\"))\n  \n# -------- Donut chart --------\nsector_donut <- ggplot(sector, aes(x = 2, y = emissions_tons, fill = label)) +\n  geom_bar(stat = \"identity\", width = 1) +\n  \n  # Use polar coordinates\n  coord_polar(theta = \"y\", start = 0) + \n  \n  # Create hole\n  xlim(0.5, 2.5) +\n  \n  # Set base theme\n  theme_void() +  \n  \n  # Adjust theme\n  theme(\n    \n    # Set legend\n    legend.position = \"right\",\n    \n    legend.title = element_text(family = subtext,\n                                size = 20,\n                                face = \"bold\"),\n    \n    legend.text = element_text(family = subtext,\n                               size = 15),\n    \n    # Set plot margin\n    plot.margin = margin(r = 20, l = 20)\n    \n    ) + \n  \n  # Title legend\n  labs(fill = \"Sector\") +\n  \n  # Use full gloom palette\n  scale_fill_paletteer_d(\"palettetown::gloom\")\n\n# View\nsector_donut\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){fig-alt='A donut chart showing the breakdown of emissions in tons by sector, with the mobile sector comprising the majority 99% of emissions.' width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Majority Pollutant Donut\"}\n# -------- Pollutants by weight --------\nall_pollutants <- emissions_cleaned_non_point %>%\n  mutate(category = ifelse(pollutant == \"Carbon Dioxide\", pollutant, \"Other\")) %>%\n  group_by(category) %>%\n  summarise(emissions_tons = sum(emissions_tons)) %>%\n  mutate(prop = round(emissions_tons/sum(emissions_tons) * 100, 0)) %>%\n  mutate(label = paste0(category, \" (\", prop, \" %)\"))\n\n# -------- Pollutants Donut --------\npollutants <- ggplot(all_pollutants, aes(x = 2, y = prop, fill = category)) +\n  geom_bar(stat = \"identity\", width = 1) +\n  \n  # Use polar coordinates\n  coord_polar(theta = \"y\", start = 0) + \n  \n  # Create hole\n  xlim(0.5, 2.5) +\n  \n  # Set base theme\n  theme_void() +  \n  \n  # Adjust theme\n  theme(\n        legend.position = \"right\",\n        \n        legend.title = element_blank(),\n        \n        legend.text = element_text(family = subtext,\n                                   size = 10),\n        \n        # Set plot margin\n        plot.margin = margin(r = 20, l = 20)\n        \n        ) + \n  \n  # Remove first two colors already used in sector donut\n  scale_fill_manual(values = paletteer::paletteer_d(\"palettetown::gloom\")[-c(1:2)] \n)\n\n# View\npollutants\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){fig-alt='A donut chart showing the breakdown of pollutants (in tons), with carbon dioxide comprising the majority 98%.' width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Other Pollutant Donut\"}\nother_pollutants <- emissions_cleaned_non_point %>%\n  mutate(category = ifelse(pollutant %in% c(\"Carbon Dioxide\", \"Carbon Monoxide\", \"Volatile Organic Compounds\", \"Nitrogen Oxides\"), pollutant, \"Other\")) %>%\n  group_by(category) %>%\n  summarise(emissions_tons = sum(emissions_tons)) %>%\n  mutate(prop = round(emissions_tons/sum(emissions_tons) * 100, 3)) %>%\n  mutate(label = paste0(category, \" (\", prop, \" %)\")) %>%\n  filter(!category == \"Carbon Dioxide\")\n\n# --------- Other pollutant donut --------\npollutants_2 <- ggplot(other_pollutants, aes(x = 2, y = emissions_tons, fill = category)) +\n  geom_bar(stat = \"identity\", width = 1) +\n  \n  # Use polar coordinates\n  coord_polar(theta = \"y\", start = 0) + \n  \n  # Create hole\n  xlim(0.5, 2.5) + \n  \n  # Set base theme\n  theme_void() +  \n  \n  # Set legend\n  theme(\n        legend.position = \"right\",\n        \n        legend.title = element_blank(),\n        \n        legend.text = element_text(family = subtext,\n                                   size = 10),\n        \n        # Set plot margin\n         plot.margin = margin(r = 20, l = 20)\n        \n        ) + \n  \n  # Remove first 4 colors that have been used\n  scale_fill_manual(values = paletteer::paletteer_d(\"palettetown::gloom\")[-c(1:4)])\n\n# View\npollutants_2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){fig-alt='A donut chart showing the breakdown of the other 2% of pollutants (in tons), which includes a majority carbon monoxide, volatile organic compunts, and nitrogen oxides.' width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}